"use strict";document.addEventListener("DOMContentLoaded",function(){initLoad();$(".ToMen").click(function(){var n={CategoryId:null,Gender:1,Name:null};showMen();setTimeout(function(){SearchProduct(n)},300);setTimeout(function(){categoryLoad(1)},300)});$(".ToWomen").click(function(){var n={CategoryId:null,Gender:0,Name:null};showWomen();setTimeout(function(){SearchProduct(n)},500);setTimeout(function(){categoryLoad(0)},300)});$(".ToHome").click(function(){initLoad();showHome()})});var registerButton=function(){$(".category").click(function(){var n,t;$(".category").removeClass("currentbtn");n=$(this);n.addClass("currentbtn");t={CategoryId:n.attr("categoryId"),Gender:n.attr("gender"),Name:null};setSearchResult(t)})},setSearchResult=function(n){$(".product_show_list").hide("slow","swing");setTimeout(function(){SearchProduct(n)},300);$(".product_show_list").show("slow","swing")},getTemplate=function(n){var t="template."+n,i=$(t).html();return $(i).clone()},getAllProduct=function(){fetch("/api/ProductApi/GetAll",{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(n){return n.json()}).then(function(n){setProduct(n)})["catch"](function(n){console.log(n)})},getCategory=function(n){var t="/api/CategoryApi/Get?Gender="+n;fetch(t,{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(n){return n.json()}).then(function(t){setCategory(t,n)})["catch"](function(n){console.log(n)})},SearchProduct=function(n){fetch("/api/ProductApi/Search",{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"})}).then(function(n){return n.json()}).then(function(n){setProduct(n)})["catch"](function(n){console.log(n)})},setProduct=function(n){var t=getTemplate("product_list");$(".product_show_list").empty();$.each(n,function(n,i){var r=t.clone();r.find(".product").attr("href","./ShowProduct/Show?Id="+i.Id);r.find(".photo").attr("src","/Files/"+i.Image);r.find(".name").text(i.Name);r.find(".price").text("$"+i.Price);$(".product_show_list").append(r)})},setCategory=function(n,t){var r=getTemplate("Category_button"),i;$(".categories").empty();i=r.clone();i.text("全部");i.attr("gender",null);i.attr("categoryId",null);i.addClass("currentbtn");$(".categories").append(i);$.each(n,function(n,i){var u=r.clone();u.text(i.Name);u.attr("gender",t);u.attr("categoryId",i.Id);$(".categories").append(u)});registerButton()},initLoad=function(){getAllProduct();showHome()},categoryLoad=function(n){var t=getCategory(n)},showWomen=function(){$(".home").hide("slow","swing");$(".men").hide("slow","swing");$(".women").show("slow","swing")},showMen=function(){$(".home").hide("slow","swing");$(".women").hide("slow","swing");$(".men").show("slow","swing")},showHome=function(){$(".men").hide();$(".women").hide();$(".home").hide();$(".home").show("slow","swing")};